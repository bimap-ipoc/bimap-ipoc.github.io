# 備份與還原

本節介紹如何進行系統的備份與還原操作，以確保數據的安全性和系統的穩定性。

## 系統備份

為了防止數據丟失，我們建議定期進行系統備份。手動進行系統備份的指令如下，但通常會在 `config.yml` 中設置 `crontab.influxdb_backup` 自動執行：

```bash
bimap-ipoc -mode backup
```

### 設定自動備份

在 `config.yml` 中設置自動備份，可以確保在指定的時間點自動執行備份操作。配置示例如下：

```yaml
crontab:
  influxdb_backup: "0 2 * * *"  # 每天凌晨 2 點執行備份
```

## 系統還原

在需要還原系統數據的情況下，請使用以下指令進行還原操作。還原操作需要 root 權限：

```bash
./ipoc-golang-api -mode restore -url http://10.99.1.131:8086 -path /var/lib/influxdb -username admin -password 1qaz2wsx
```

### 調整還原參數

還原操作中涉及的參數說明如下：
- **url**: 還原數據所需的 InfluxDB URL，該 URL 需與 `config.yml` 中 `influxdbs.url` 一致。
- **path**: InfluxDB 數據庫文件的路徑，預設為 `/var/lib/influxdb`。
- **username**: 還原後設定的登入帳號。
- **password**: 還原後設定的登入密碼。

請確保以上參數正確無誤，以保證數據還原的成功。

## 注意事項

- **定期備份**：為了防止數據丟失，請務必定期進行備份操作。
- **存儲空間**：確保備份文件有足夠的存儲空間。
- **數據安全**：妥善保管備份文件，避免未授權的訪問。
